# V2.1 Real-Time Data Integration - 100% FREE! ðŸŽ‰

## Overview

V2.1 transforms the Event Planner Agent from a demo with seeded data to a **production-ready system** using **100% FREE, NO API KEYS REQUIRED** real-time data sources.

**Zero Cost. Zero API Keys. Unlimited Usage.**

### Data Sources (All 100% FREE!)

1. **OpenStreetMap Overpass API** - Unlimited venue & caterer data
2. **Nominatim** - Free geocoding & reverse geocoding  
3. **Photon** - Lightning-fast place search

## Architecture

### MCP Servers

#### 1. MCP OSM Scraper (Port 3003)
- OpenStreetMap Overpass API integration
- Endpoints:
  - `POST /scrape/osm/caterers` - Restaurants, cafes, caterers
  - `POST /scrape/osm/venues` - Event venues, hotels, conference centers
- **No API key required**
- Rate limit: Fair use

#### 2. MCP Geocoding (Port 3004)
- Nominatim + Photon integration
- Endpoints:
  - `POST /geocode` - Address to Coordinates
  - `POST /reverse-geocode` - Coordinates to Address
  - `POST /places/search` - Fast place search
  - `POST /places/nearby` - Nearby places
  - `GET /places/details/:id` - Place details
- **No API key required**
- Rate limit: 1 req/sec (Nominatim)

## Benefits

### Cost Comparison

| Solution | Monthly Cost | API Keys | Rate Limit |
|----------|-------------|----------|------------|
| **OSM + Nominatim + Photon** | **$0** | **None** | Unlimited |
| Google Places | $0-$200 | Required | 28K/month |
| Yelp Fusion | $1,000+ | Required | 5K/day |

### Features

- Zero Cost - No monthly fees, ever  
- No API Keys - No signup, no credit card  
- Global Coverage - 8+ billion data points  
- Unlimited Requests - Fair use policy  
- Real-time Data - Always up-to-date  
- Self-hostable - Can run your own instances  

## Setup Instructions

### 1. No API Keys Needed!

That's right - **ZERO API keys required!**

### 2. Run Database Migration

```bash
docker compose up -d postgres
sleep 10
docker exec -it event-planner-db psql -U postgres -d event_planner_db \
  -f /docker-entrypoint-initdb.d/migrations/001_add_external_data_support.sql
```

### 3. Start All Services

```bash
docker compose up --build -d
```

Services:
- PostgreSQL: `localhost:5432`
- Redis: `localhost:6379`
- MCP OSM Scraper: `localhost:3003`
- MCP Geocoding: `localhost:3004`
- FastAPI: `localhost:8000`
- Nginx: `localhost:80`

### 4. Test the Stack

```bash
# Test OSM scraper
curl -X POST http://localhost:3003/scrape/osm/caterers \
  -H "Content-Type: application/json" \
  -d '{"location": "San Francisco", "limit": 10}'

# Test Nominatim geocoding
curl -X POST http://localhost:3004/geocode \
  -H "Content-Type: application/json" \
  -d '{"address": "San Francisco, CA"}'

# Test Photon search
curl -X POST http://localhost:3004/places/search \
  -H "Content-Type: application/json" \
  -d '{"query": "restaurants in San Francisco", "limit": 10}'
```

## Database Schema

New columns added to `venues` and `caterers`:

```sql
external_id VARCHAR(255)
external_source VARCHAR(50)
external_url TEXT
rating DECIMAL(2,1)
review_count INTEGER
price_level INTEGER
latitude DECIMAL(10,8)
longitude DECIMAL(11,8)
photos JSONB
business_status VARCHAR(50)
last_synced_at TIMESTAMP
```

## Troubleshooting

### OSM Scraper Issues
- **Timeout**: Reduce search radius or limit
- **No results**: Check location spelling
- **Rate limiting**: Wait 1 minute between requests

### Nominatim Issues
- **Rate limit**: Respect 1 req/sec limit
- **No results**: Try broader search terms

### Photon Issues
- **No results**: Try different query terms
- **Slow response**: Check network connection

---

**V2.1 Status**: Complete - 100% Free, No API Keys Required!
